<!doctype html><html xmlns=http://www.w3.org/1999/xhtml lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Machine Learning Best Practises | MagPie DevOps</title><meta property="og:title" content="Machine Learning Best Practises - MagPie DevOps"><meta property="og:description" content="Assuming you have your cool new machine learned model, you will probably be wanting to show it off to your friends.
This post will lay out a couple of best practises around hosting and running your machine learned models"><meta property="og:url" content="https://davidsoff.nl/blog/machine-learning-best-practises/"><meta property="og:site_name" content="MagPie DevOps"><meta property="og:type" content="article"><meta property="og:image" content="https://www.gravatar.com/avatar/2ebe4171e7f9c95cafbd84ec104e6051?s=256"><meta property="article:section" content="Blog"><meta property="article:published_time" content="2020-01-16T14:46:37+01:00"><meta property="article:modified_time" content="2020-01-16T14:46:37+01:00"><meta name=twitter:card content="summary"><meta name=twitter:site content="@SoffDavid"><meta name=twitter:creator content="@SoffDavid"><link href=https://davidsoff.nl/index.xml rel=alternate type=application/rss+xml title="MagPie DevOps"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://davidsoff.nl/css/index.css><link rel=stylesheet href=https://davidsoff.nl/css/presentation.css><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://davidsoff.nl/blog/machine-learning-best-practises/><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"></head><body><section class=section><div class=container><nav id=nav-main class=nav><div id=nav-name class=nav-left><a id=nav-anchor class=nav-item href=https://davidsoff.nl/><h1 id=nav-heading class="title is-4">MagPie DevOps</h1></a></div><div class=nav-right><nav id=nav-items class="nav-item level is-mobile"><a class=level-item aria-label=github href=https://github.com/DavidSoff target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></i></span></a><a class=level-item aria-label=twitter href=https://twitter.com/SoffDavid target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></i></span></a><a class=level-item aria-label=email href=mailto:david@soff.nl target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></i></span></a><a class=level-item aria-label=linkedin href=https://linkedin.com/in/davidsoff target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path stroke-width="1.8" d="m5.839218 4.101561c0 1.211972-.974141 2.194011-2.176459 2.194011S1.4863 5.313533 1.4863 4.101561c0-1.211094.974141-2.194011 2.176459-2.194011s2.176459.982917 2.176459 2.194011zm.017552 3.94922h-4.388022v14.04167H5.85677V8.050781zm7.005038.0H8.501869v14.04167h4.360816v-7.370999c0-4.098413 5.291077-4.433657 5.291077.0v7.370999h4.377491v-8.89101c0-6.915523-7.829986-6.66365-9.669445-3.259423V8.050781z"/></svg></i></span></a><a class=level-item aria-label=rss href=/index.xml target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></i></span></a></nav></div></nav><nav class=nav></nav></div><script src=/js/navicon-shift.js></script></section><section class=section><div class=container><div class="subtitle tags is-6 is-pulled-right"></div><h2 class="subtitle is-6">January 16, 2020</h2><h1 class=title>Machine Learning Best Practises</h1><div class=content><p>Assuming you have your cool new machine learned model, you will probably be wanting to show it off to your friends.
This post will lay out a couple of best practises around hosting and running your machine learned models</p><h2 id=deploying>Deploying</h2><p>To deploy your model you will have to export it, there are multiple file types available for this so pick the one your programming language supports.</p><p>For python some common file formats are:</p><ul><li>Pickle</li><li>joblib</li></ul><p>It is also possible to export models trained using tensorflow to a tensorflow specific file format.
Tensorflow is also supported by R</p><h3 id=serving>Serving</h3><p>There are many solutions for serving a model. Most solutions do follow the principle of exposing an api and converting the request data to the format expected by the model. Some frameworks have more built in features so less code is needed to get an application which can serve predictions.</p><h2 id=retraining>Retraining</h2><p>Your first model was trained using a training set. This training set is a snapshot of the world (or the piece you are evaluating atleast) at a specific moment in time. Since change is inevitable, your trainingdata will become outdated and will need to be refreshed. This also means your model is out of date. This phenomenon is called <em>model drift</em>.</p><p>There are multiple ways of detecting model drift and there is no one-size-fits all, a few ways of checking for model drift are:</p><ul><li>Examining the feature distributions of training and live data</li><li>Examining the correlations between features</li><li>Examining the target distributions</li></ul><p>A more thorough explanation on what this means can be found <a href=https://mlinproduction.com/model-retraining/>here</a></p><h2 id=monitoring>Monitoring</h2><p>Once your model is in production you will want to keet rack of the folowing metrics next to your normal monitoring of CPU, memory, latency, throughput, etc</p><h3 id=age-of-the-model>Age of the model</h3><p>The model will become less accurate if you do not retrain it regularly using fresh data</p><h3 id=accuracy-of-the-model>Accuracy of the model</h3><p>Keep tabs on the accuracy of the model so that you can detect sudden changes. Big changes may be an indication of a problem.
Also remember to validate your accuracy using human feedback.</p><h3 id=output-distribution>Output distribution</h3><p>Keep tabs on the distribution of your predictions. Sudden changes in the distribution can be an indication of bugs or problems.
Although this can also be caused by changes in the input conditions, it is certainly worth investigating the cause of the sudden change.</p><h2 id=sources>Sources</h2><p><a href=https://blog.dominodatalab.com/on-being-model-driven-metrics-and-monitoring/>https://blog.dominodatalab.com/on-being-model-driven-metrics-and-monitoring/</a>
<a href=https://mlinproduction.com/model-retraining/>https://mlinproduction.com/model-retraining/</a></p><div class=related></div></div></div></section><section class=section><div class=container><aside><div id=disqus_thread></div></aside><div id=show_comments><a id=load_comments class="button is-link">Load comments</a></div><script type=text/javascript>var disqus_shortname='davidsoff-nl';function disqus(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);}
var hash=window.location.hash.substr(1);if((hash.length>8)&&(hash.substring(0,8)==="comment-")){disqus();document.getElementById("show_comments").style.display="none";}else{document.getElementById('load_comments').onclick=function(){disqus();document.getElementById("show_comments").style.display="none";};}</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript></div></section><section class=section><div class="container has-text-centered"><p>All Rights Reserved <a href=https://github.com/DavidSoff>David Soff</a> 2019</p></div></section><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-151064893-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>